<section class="panel panel--danger">
  <header class="panel__header">
    <div>
      <p class="eyebrow">Bearbeiten oder löschen</p>
      <h1>Kundenverwaltung</h1>
    </div>
    <p class="subtitle">
      Diese Seite wird später zur Bearbeitungsansicht. Löschen kann nicht rückgängig gemacht werden.
    </p>
  </header>

  <p class="status status--error" *ngIf="errorMessage()">{{ errorMessage() }}</p>
  <p class="status" *ngIf="isLoading()">Kunde wird geladen...</p>

  <div class="single" *ngIf="!isLoading() && editMode() && selectedCustomer()">
    <div class="single__row">
      <span class="list__id">#{{ selectedCustomer()?.id }}</span>
      <span class="list__name">{{ selectedCustomer()?.name }}</span>
    </div>
    <form class="edit-form" (ngSubmit)="saveChanges()">
      <label class="field">
        <span class="field__label">Kundenname</span>
        <input
          class="field__input"
          type="text"
          name="editCustomerName"
          [(ngModel)]="editName"
          placeholder="Kundenname bearbeiten"
        />
      </label>
      <div class="edit-form__actions">
        <button class="primary-button" type="submit">Änderungen speichern</button>
      </div>
    </form>

    <div class="danger-zone">
      <p class="danger-zone__title">Löschen</p>
      <p class="danger-zone__text">
        Entferne diesen Kunden dauerhaft. Dieser Schritt kann nicht rückgängig gemacht werden.
      </p>
      <button
        class="danger-button danger-button--footer"
        type="button"
        (click)="promptDelete()"
      >
        Kunde löschen
      </button>
    </div>
  </div>

  <a class="link" [routerLink]="['/customers', selectedCustomer()?.id]">Zurück zum Kunden</a>
</section>

<div class="modal" *ngIf="showConfirm()">
  <div class="modal__overlay" (click)="cancelDelete()"></div>
  <div class="modal__content">
    <h2>Kunde löschen?</h2>
    <p>
      Du löschst
      <strong>{{ selectedCustomer()?.name }}</strong>.
      Dieser Vorgang ist endgültig.
    </p>
    <div class="modal__actions">
      <button class="ghost-button" type="button" (click)="cancelDelete()">Abbrechen</button>
      <button class="danger-button" type="button" (click)="confirmDelete()">Löschen</button>
    </div>
  </div>
</div>

<div class="modal modal--success" *ngIf="successMessage()">
  <div class="modal__overlay"></div>
  <div class="modal__content modal__content--success">
    <h2>Erfolg</h2>
    <p>{{ successMessage() }}</p>
    <div class="modal__actions">
      <button class="ghost-button" type="button" (click)="dismissSuccess()">OK</button>
    </div>
  </div>
</div>
